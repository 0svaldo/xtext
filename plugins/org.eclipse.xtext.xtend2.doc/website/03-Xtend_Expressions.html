<br style="clear:both;height:1em;">
	<div id="leftcol">
		<div class="nav-logo">
			<a href="index.php"><img src="logo.png" style="margin-left:10px; width:155px"/></a>
		</div>
		<ul id="leftnav">
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="01-Xtend_Introduction.php">Introduction</a></div>
		<ul style="display: none;" id="subToc_01-Xtend_Introduction.html">
		<li id="01-Xtend_Introduction.html#Getting_Started" ><a href="01-Xtend_Introduction.php#Getting_Started" >Getting Started</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="02-Xtend_Classes_Functions.php">Classes and Functions</a></div>
		<ul style="display: none;" id="subToc_02-Xtend_Classes_Functions.html">
		<li id="02-Xtend_Classes_Functions.html#packageDecl" ><a href="02-Xtend_Classes_Functions.php#packageDecl" >Package Declaration</a></li>
		<li id="02-Xtend_Classes_Functions.html#imports" ><a href="02-Xtend_Classes_Functions.php#imports" >Imports</a></li>
		<li id="02-Xtend_Classes_Functions.html#Xtend_ClassDeclaration" ><a href="02-Xtend_Classes_Functions.php#Xtend_ClassDeclaration" >Class Declaration</a></li>
		<li id="02-Xtend_Classes_Functions.html#fields" ><a href="02-Xtend_Classes_Functions.php#fields" >Fields</a></li>
		<li id="02-Xtend_Classes_Functions.html#Functions" ><a href="02-Xtend_Classes_Functions.php#Functions" >Functions</a></li>
		<li id="02-Xtend_Classes_Functions.html#Annotations" ><a href="02-Xtend_Classes_Functions.php#Annotations" >Annotations</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="03-Xtend_Expressions.php">Expressions</a></div>
		<ul style="display: none;" id="subToc_03-Xtend_Expressions.html">
		<li id="04-Expressions.html#Xbase_Expressions_Blocks" ><a href="04-Expressions.php#Xbase_Expressions_Blocks" >Blocks</a></li>
		<li id="04-Expressions.html#Xbase_Expressions_Literals" ><a href="04-Expressions.php#Xbase_Expressions_Literals" >Literals</a></li>
		<li id="04-Expressions.html#Xbase_Expressions_Operators" ><a href="04-Expressions.php#Xbase_Expressions_Operators" >Infix Operators / Operator Overloading</a></li>
		<li id="04-Expressions.html#Xbase_Expressions_FeatureCalls" ><a href="04-Expressions.php#Xbase_Expressions_FeatureCalls" >Feature Calls</a></li>
		<li id="04-Expressions.html#Xbase_Expressions_ConstructorCall" ><a href="04-Expressions.php#Xbase_Expressions_ConstructorCall" >Constructor Call</a></li>
		<li id="04-Expressions.html#Xbase_Expressions_IfExpression" ><a href="04-Expressions.php#Xbase_Expressions_IfExpression" >If Expression</a></li>
		<li id="04-Expressions.html#Xbase_Expressions_ForLoop" ><a href="04-Expressions.php#Xbase_Expressions_ForLoop" >For Loop</a></li>
		<li id="04-Expressions.html#Xbase_Expressions_WhileExpression" ><a href="04-Expressions.php#Xbase_Expressions_WhileExpression" >While Loop</a></li>
		<li id="04-Expressions.html#Xbase_Expressions_DoWhileExpression" ><a href="04-Expressions.php#Xbase_Expressions_DoWhileExpression" >Do-While Loop</a></li>
		<li id="04-Expressions.html#Xbase_Expressions_VariableDeclaration" ><a href="04-Expressions.php#Xbase_Expressions_VariableDeclaration" >Variable Declarations</a></li>
		<li id="04-Expressions.html#Xbase_Expressions_Closures" ><a href="04-Expressions.php#Xbase_Expressions_Closures" >Closures</a></li>
		<li id="04-Expressions.html#Xbase_Expressions_SwitchExpression" ><a href="04-Expressions.php#Xbase_Expressions_SwitchExpression" >Switch Expression</a></li>
		<li id="04-Expressions.html#Xbase_Expressions_TypeCasts" ><a href="04-Expressions.php#Xbase_Expressions_TypeCasts" >Type Casts</a></li>
		<li id="03-Xtend_Expressions.html#Xtend_RichStrings" ><a href="03-Xtend_Expressions.php#Xtend_RichStrings" >Rich Strings</a></li>
		<li id="04-Expressions.html#Xbase_Expressions_Return" ><a href="04-Expressions.php#Xbase_Expressions_Return" >Return Expression</a></li>
		<li id="04-Expressions.html#Xbase_Expressions_Throw" ><a href="04-Expressions.php#Xbase_Expressions_Throw" >Throwing Exceptions</a></li>
		<li id="04-Expressions.html#Xbase_Expressions_TryCatch" ><a href="04-Expressions.php#Xbase_Expressions_TryCatch" >Try, Catch, Finally</a></li>
		</ul>
		</li>
		</ul>
	</div>
	<div id="midcolumn">
		<a name="Xtend_Expressions" ></a>
		<h1>Expressions</h1>
				<div class="toc">
				  <ul>
				    <li><a href="04-Expressions.php#Xbase_Expressions_Blocks" >Blocks</a></li>
				    <li><a href="04-Expressions.php#Xbase_Expressions_Literals" >Literals</a></li>
				    <li><a href="04-Expressions.php#Xbase_Expressions_Operators" >Infix Operators / Operator Overloading</a></li>
				    <li><a href="04-Expressions.php#Xbase_Expressions_FeatureCalls" >Feature Calls</a></li>
				    <li><a href="04-Expressions.php#Xbase_Expressions_ConstructorCall" >Constructor Call</a></li>
				    <li><a href="04-Expressions.php#Xbase_Expressions_IfExpression" >If Expression</a></li>
				    <li><a href="04-Expressions.php#Xbase_Expressions_ForLoop" >For Loop</a></li>
				    <li><a href="04-Expressions.php#Xbase_Expressions_WhileExpression" >While Loop</a></li>
				    <li><a href="04-Expressions.php#Xbase_Expressions_DoWhileExpression" >Do-While Loop</a></li>
				    <li><a href="04-Expressions.php#Xbase_Expressions_VariableDeclaration" >Variable Declarations</a></li>
				    <li><a href="04-Expressions.php#Xbase_Expressions_Closures" >Closures</a></li>
				    <li><a href="04-Expressions.php#Xbase_Expressions_SwitchExpression" >Switch Expression</a></li>
				    <li><a href="04-Expressions.php#Xbase_Expressions_TypeCasts" >Type Casts</a></li>
				    <li><a href="03-Xtend_Expressions.php#Xtend_RichStrings" >Rich Strings</a></li>
				    <li><a href="04-Expressions.php#Xbase_Expressions_Return" >Return Expression</a></li>
				    <li><a href="04-Expressions.php#Xbase_Expressions_Throw" >Throwing Exceptions</a></li>
				    <li><a href="04-Expressions.php#Xbase_Expressions_TryCatch" >Try, Catch, Finally</a></li>
				  </ul>
				</div>
				
		<p>
		The most important part of a function is of course its implementation, which in Xtend is either a single
		<a href="04-Expressions.php#Xbase_Expressions_Blocks" title="Go to &quot;Blocks&quot;">block expression</a> or a <a href="03-Xtend_Expressions.php#Xtend_RichStrings" title="Go to &quot;Rich Strings&quot;">rich string expression</a>. 
		</p>
		<a href="04-Expressions.html#Xbase_Expressions_Blocks"><h1></h1></a>
		<a href="04-Expressions.html#Xbase_Expressions_Literals"><h1></h1></a>
		<a href="04-Expressions.html#Xbase_Expressions_Operators"><h1></h1></a>
		<a href="04-Expressions.html#Xbase_Expressions_FeatureCalls"><h1></h1></a>
		<a href="04-Expressions.html#Xbase_Expressions_ConstructorCall"><h1></h1></a>
		<a href="04-Expressions.html#Xbase_Expressions_IfExpression"><h1></h1></a>
		<a href="04-Expressions.html#Xbase_Expressions_ForLoop"><h1></h1></a>
		<a href="04-Expressions.html#Xbase_Expressions_WhileExpression"><h1></h1></a>
		<a href="04-Expressions.html#Xbase_Expressions_DoWhileExpression"><h1></h1></a>
		<a href="04-Expressions.html#Xbase_Expressions_VariableDeclaration"><h1></h1></a>
		<a href="04-Expressions.html#Xbase_Expressions_Closures"><h1></h1></a>
		<a href="04-Expressions.html#Xbase_Expressions_SwitchExpression"><h1></h1></a>
		<a href="04-Expressions.html#Xbase_Expressions_TypeCasts"><h1></h1></a>
			<a name="Xtend_RichStrings" ></a>
			<span style="float:left; border-top: 1px dotted #d4d4dd; margin-left: 0; margin-top: 5px;
		padding: 5px 0;
		padding-top: 5px;"></span><a style="float: right" href="#">Top</a>
		<br style="clear:both" />
			<h1>Rich Strings</h1>
				<div class="toc">
				  <ul>
				    <li><a href="03-Xtend_Expressions.php#RichStringIF" >Conditions in Rich Strings</a></li>
				    <li><a href="03-Xtend_Expressions.php#RichStringFOREACH" >Loops in Rich Strings</a></li>
				    <li><a href="03-Xtend_Expressions.php#RichStringType" >Typing</a></li>
				    <li><a href="03-Xtend_Expressions.php#WhitespaceHandling" >White Space Handling</a></li>
				  </ul>
				</div>
			<p>
			Rich Strings allow for readable string concatenation, which is the main thing you do when writing a code generator. 
			Let's have a look at an example of how a typical function with template expressions looks like:
			</p>
			<p>
			<div class="literallayout">
			<div class="incode">
			<p class="code">
			toClass(Entity&nbsp;e)&nbsp;<span class="string">&apos;&apos;</span><span class="string">&apos;<br/>
			&nbsp;&nbsp;package&nbsp;&laquo;e.packageName&raquo;;<br/>
			<br/>
			&nbsp;&nbsp;&laquo;placeImports&raquo;<br/>
			<br/>
			&nbsp;&nbsp;public&nbsp;class&nbsp;&laquo;e.name&raquo;&nbsp;&laquo;IF&nbsp;e.extends!=null&raquo;extends&nbsp;&laquo;e.extends&raquo;&laquo;ENDIF&raquo;&nbsp;{<br/>
			&nbsp;&nbsp;&nbsp;&nbsp;&laquo;FOREACH&nbsp;e.members&raquo;<br/>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&laquo;member.toMember&raquo;<br/>
			&nbsp;&nbsp;&nbsp;&nbsp;&laquo;ENDFOREACH&raquo;<br/>
			&nbsp;&nbsp;}<br/>
			&apos;</span><span class="string">&apos;&apos;</span>
			</p>
			</div>
			</div>
			</p>
			<p>
			If you are familiar with Xpand, you'll notice that it is exactly the same syntax. The difference is, that
			the template syntax is actually an expression, which means it can occur everywhere where an expression is
			expected. For instance in conjunction the powerful switch expression from Xbase:
			</p>
			<p>
			<div class="literallayout">
			<div class="incode">
			<p class="code">
			toMember(Member&nbsp;m)&nbsp;{<br/>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">switch</span>&nbsp;m&nbsp;{<br/>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Field&nbsp;:&nbsp;<span class="string">&apos;&apos;</span><span class="string">&apos;private&nbsp;&laquo;m.type&raquo;&nbsp;&laquo;m.name&raquo;&nbsp;;&apos;</span><span class="string">&apos;&apos;</span><br/>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method&nbsp;<span class="keyword">case</span>&nbsp;isAbstract&nbsp;:&nbsp;<span class="string">&apos;&apos;</span><span class="string">&apos;&nbsp;abstract&nbsp;&laquo;...&apos;</span><span class="string">&apos;&apos;</span><br/>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method&nbsp;:&nbsp;<span class="string">&apos;&apos;</span><span class="string">&apos;&nbsp;.....&nbsp;&apos;</span><span class="string">&apos;&apos;</span><br/>
			&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
			}
			</p>
			</div>
			</div>
			</p>
			<a name="RichStringIF" ></a>
			<h2>Conditions in Rich Strings</h2>
			<p>
			There is a special <span class="inlinecode"><span class="keyword">IF</span></span> to be used within rich strings which is identical in syntax and meaning to the
			old <span class="inlinecode"><span class="keyword">IF</span></span> from Xpand. Note that you could also use the if expression, but since it has not an explicit
			terminal token, it is not as readable in that context.
			</p>
			<a name="RichStringFOREACH" ></a>
			<h2>Loops in Rich Strings</h2>
			<p>
			Also the <span class="inlinecode"><span class="keyword">FOR</span></span> statement is available and can only be used in the context of a rich string.
			It also supports the <span class="inlinecode"><span class="keyword">SEPARATOR</span></span> from Xpand. In addition, a <span class="inlinecode"><span class="keyword">BEFORE</span></span> expression
			can be defined that is only evaluated if the loop is at least evaluated once before the very first iteration.
			Consequently <span class="inlinecode"><span class="keyword">AFTER</span></span> is evaluated after the last iteration if there is any element.
			</p>
			<a name="RichStringType" ></a>
			<h2>Typing</h2>
			<p>
			The rich string is translated to an efficient string concatenation and the return type of a rich string
			is <a class="jdoc" href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/CharSequence.html" title="java.lang.CharSequence">CharSequence</abbr></a> which allows room for efficient implementation.
			</p>
			<a name="WhitespaceHandling" ></a>
			<h2>White Space Handling</h2>
			<p>
			One of the key features of rich strings is the smart handling of white space in the template output. The
			white space is not written into the output data structure as is but preprocessed. This allows for readable
			templates as well as nicely formatted output. This can be achieved by applying three simple rules
			when the rich string is evaluated.
			</p>
			<p>
			<ol>
			  <li>
			  		An evaluated rich string as part of another string will be prefixed with the current indentation
			  		of the caller before it is inserted into the result.
			  </li>
			  <li>
			  		Indentation in the template that is relative to a control structure will not be propagated to
			  		the output string. A control structure is a <span class="inlinecode"><span class="keyword">FOR</span></span>-loop or a condition (<span class="inlinecode"><span class="keyword">IF</span></span>) as well
			  		as the opening and closing marks of the rich string itself.
			  		
			  		The indentation is considered to be relative to such a control structure if the previous line
			  		ends with a control structure followed by optional white space. The amount of white space is not
			  		taken into account but the delta to the other lines.
			  </li>
			  <li>
			  		Lines that do not contain any static text which is not white space but do contain control structures
			  		or invocations of other templates which evaluate to an empty string, will not appear in the output.
			  </li>
			</ol>
			</p>
			<p>
			The behavior is best described with a set of examples. The following table assumes a data structure of
			nested nodes.
			</p>
			<p>
			<table>
			  <tr>
			    <td>
			    			<div class="literallayout">
			    <div class="incode">
			    <p class="code">
			    <span class="keyword">class</span>&nbsp;Template&nbsp;{<br/>
			    &nbsp;&nbsp;&nbsp;&nbsp;print(Node&nbsp;n)&nbsp;<span class="string">&apos;&apos;</span><span class="string">&apos;<br/>
			    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node&nbsp;&laquo;n.name&raquo;&nbsp;{}<br/>
			    &nbsp;&nbsp;&nbsp;&nbsp;&apos;</span><span class="string">&apos;&apos;</span><br/>
			    }
			    </p>
			    </div>
			    </div>
			    
			    </td>
			    <td>
			    			<span class="inlinecode">node&nbsp;NodeName{}</span>
			    </td>
			  </tr>
			</table>
			</p>
			<p>
			The indentation before <span class="inlinecode">node&nbsp;&laquo;n.name&raquo;</span> will be skipped as it is relative to the opening
			mark of the rich string and thereby not considered to be relevant for the output but only
			for readability of the template itself.
			</p>
			<p>
			<table>
			  <tr>
			    <td>
			    			<div class="literallayout">
			    <div class="incode">
			    <p class="code">
			    <span class="keyword">class</span>&nbsp;Template&nbsp;{<br/>
			    &nbsp;&nbsp;&nbsp;&nbsp;print(Node&nbsp;n)&nbsp;<span class="string">&apos;&apos;</span><span class="string">&apos;<br/>
			    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node&nbsp;&laquo;n.name&raquo;&nbsp;{<br/>
			    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&laquo;IF&nbsp;hasChildren&raquo;<br/>
			    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&laquo;n.children*.print&raquo;<br/>
			    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&laquo;ENDIF&raquo;<br/>
			    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
			    &nbsp;&nbsp;&nbsp;&nbsp;&apos;</span><span class="string">&apos;&apos;</span><br/>
			    }
			    </p>
			    </div>
			    </div>
			    
			    </td>
			    <td>
			    			<div class="literallayout">
			    <div class="incode">
			    <p class="code">
			    node&nbsp;Parent{<br/>
			    &nbsp;&nbsp;&nbsp;&nbsp;node&nbsp;FirstChild&nbsp;{<br/>
			    &nbsp;&nbsp;&nbsp;&nbsp;}<br/>
			    &nbsp;&nbsp;&nbsp;&nbsp;node&nbsp;SecondChild&nbsp;{<br/>
			    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node&nbsp;Leaf&nbsp;{<br/>
			    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
			    &nbsp;&nbsp;&nbsp;&nbsp;}<br/>
			    }
			    </p>
			    </div>
			    </div>
			    
			    </td>
			  </tr>
			</table>
			</p>
			<p>
			As in the previous example, there is no indentation on the root level for the same reason.
			The first nesting level has only one indentation level in the output. This is derived from
			the indentation of the <span class="inlinecode"><span class="keyword">IF</span>&nbsp;hasChildren</span> condition in the template which is nested in
			the node. The additional nesting of the recursive invocation <span class="inlinecode">children*.print</span> is not
			visible in the output as it is relative the the surrounding control structure. The line with
			<span class="inlinecode"><span class="keyword">IF</span></span> and <span class="inlinecode"><span class="keyword">ENDIF</span></span> contain only control structures thus they are skipped in the output.
			Note the additional indentation of the node <em>Leaf</em> which happens due to the first rule:
			Indentation is propagated to called templates.
			</p>
		<a href="04-Expressions.html#Xbase_Expressions_Return"><h1></h1></a>
		<a href="04-Expressions.html#Xbase_Expressions_Throw"><h1></h1></a>
		<a href="04-Expressions.html#Xbase_Expressions_TryCatch"><h1></h1></a>
	</div>
	<br style="clear:both;height:1em;">
