<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<title>Introduction</title>

<link href="book.css" rel="stylesheet" type="text/css">
<link href="code.css" rel="stylesheet" type="text/css">
<link rel="home" href="xtext.html" title="">
</head>
<body>
<a name="Introduction"></a>
<h1>Introduction</h1>
<p>
Xtend is a statically-typed programming language which translates to comprehensible Java source code. 
Syntactically and semantically Xtend has its roots in the Java programming language but improves on many aspects:   
</p>
<p>
<ul>
	<li>
		<em><a href="20-classes-and-functions.html#extensionMethods" title="Go to &quot;Extension Methods&quot;">Extension methods</a></em> - enhance closed types with new functionality
	</li>
	<li>
		<em><a href="30-expressions.html#lambdas" title="Go to &quot;Lambda Expressions&quot;">Lambda Expressions</a></em> - concise syntax for anonymous function literals
	</li>
	<li>
		<em><a href="30-expressions.html#operators" title="Go to &quot;Infix Operators and Operator Overloading&quot;">Operator overloading</a></em> - make your libraries even more expressive
	</li>
	<li>
		<em><a href="30-expressions.html#switchExpression" title="Go to &quot;Switch Expression&quot;">Powerful switch expressions</a></em> - type based switching with implicit casts
	</li>
	<li>
		<em><a href="20-classes-and-functions.html#polymorphicDispatch" title="Go to &quot;Dispatch Methods&quot;">Multiple dispatch</a></em> - a.k.a. polymorphic method invocation
	</li>
	<li>
		<em><a href="30-expressions.html#templates" title="Go to &quot;Template Expressions&quot;">Template expressions</a></em> - with intelligent white space handling
	</li>
	<li>
		<em><a href="30-expressions.html#Xtend_Expressions" title="Go to &quot;Expressions&quot;">No statements</a></em> - everything is an expression
	</li>
	<li>
		<em><a href="30-expressions.html#propertyAccess" title="Go to &quot;Property Access&quot;">Properties</a></em> - shorthands for accessing and defining getters and setter
	</li>
	<li>
		<em>Local type inference</em> - you rarely need to write down type signatures anymore
	</li>
	<li>
		<em>Full support for Java Generics</em> - including all conformance and conversion rules
	</li>
	<li>
		<em>Translates to Java</em> not bytecode - understand what is going on and use your code for platforms 
		    such as Android or GWT
	</li>
</ul>
</p>
<p>
The language is not aiming at replacing Java all together. Its <a href="10-introduction.html#library" title="Go to &quot;The Runtime Library&quot;">library</a> is just a thin layer on top of the 
Java Development Kit (JDK) and unlike with other JVM languages there are <a href="15-types.html#javaInteroperability" title="Go to &quot;Interoperability with Java&quot;">zero interoperability</a> issues :
Everything you write in Xtend interacts with Java exactly as if it were written in Java in the first place.
At the same time Xtend just much more concise, readable and expressive. 
</p>
<p>
Of course, you can call Xtend methods from Java, too, in a completely transparent way. Furthermore, Xtend provides a modern 
Eclipse-based IDE closely integrated with Eclipse&apos;s Java Development Tools (JDT), including features like call-hierarchies, rename refactoring, 
debugging and many more.
</p>
<a name="Installation"></a>
<h2>Installation</h2>
<p>
Xtend requires Eclipse 3.5 or higher and a Java SDK 5 or higher. The easiest way to install the
SDK is via <a href="http://marketplace.eclipse.org/content/eclipse-xtend">Eclipse Marketplace</a>. 
But there&apos;s also a complete Eclipse distribution <a href="http://www.eclipse.org/xtend/index.html#download">available for download
at http://xtend-lang.org</a>.
</p>
<p>
If you don&apos;t want to use the recommended Eclipse Plug-in, you can compile Xtend code using the 
<a href="10-introduction.html#MavenSupport" title="Go to &quot;Maven Support&quot;">Maven plug-in</a>.
</p>
<a name="MavenSupport"></a>
<h3>Maven Support</h3>
<p>
The <a href="10-introduction.html#library" title="Go to &quot;The Runtime Library&quot;">runtime library</a> as well as a plug-in to run the compiler in a Maven build can be be obtained from
the following maven repository: <a href="http://build.eclipse.org/common/xtend/maven/">http://build.eclipse.org/common/xtend/maven/</a>.
</p>
<p>
Here&apos;s the XML for the repository:
<div class="literallayout">
<div class="incode">
<p class="code">
&lt;repositories&gt;<br/>
&nbsp;&nbsp;&lt;repository&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&gt;xtend&lt;/id&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;url&gt;http:<span class="comment">//build.eclipse.org/common/xtend/maven/&lt;/url&gt;<br/>
</span>&nbsp;&nbsp;&lt;/repository&gt;<br/>
&lt;/repositories&gt;<br/>
&lt;pluginRepositories&gt;<br/>
&nbsp;&nbsp;&lt;pluginRepository&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&gt;xtend&lt;/id&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;url&gt;http:<span class="comment">//build.eclipse.org/common/xtend/maven/&lt;/url&gt;<br/>
</span>&nbsp;&nbsp;&lt;/pluginRepository&gt;<br/>
&lt;/pluginRepositories&gt;<br/>
</p>
</div>
</div>
</p>
<p>
Here&apos;s the XML for the dependency to the library:
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
&lt;dependency&gt;<br/>
&nbsp;&nbsp;&lt;groupId&gt;org.eclipse.xtend&lt;/groupId&gt;<br/>
&nbsp;&nbsp;&lt;artifactId&gt;org.eclipse.xtend.lib&lt;/artifactId&gt;<br/>
&nbsp;&nbsp;&lt;version&gt;2.3.0&lt;/version&gt;<br/>
&lt;/dependency&gt;<br/>
</p>
</div>
</div>
</p>
<p>
And this is the XML for the plug-in:
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
&lt;plugin&gt;<br/>
&nbsp;&nbsp;&lt;groupId&gt;org.eclipse.xtend&lt;/groupId&gt;<br/>
&nbsp;&nbsp;&lt;artifactId&gt;xtend-maven-plugin&lt;/artifactId&gt;<br/>
&nbsp;&nbsp;&lt;version&gt;2.3.0&lt;/version&gt;<br/>
&nbsp;&nbsp;&lt;executions&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;execution&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;goals&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;goal&gt;compile&lt;/goal&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;&lt;goal&gt;testCompile&lt;/goal&gt;&nbsp;--&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/goals&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;optionally&nbsp;you&nbsp;can&nbsp;configure&nbsp;a&nbsp;different&nbsp;target&nbsp;folder&nbsp;--&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;configuration&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;outputDirectory&gt;xtend-gen&lt;/outputDirectory&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/configuration&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/execution&gt;<br/>
&nbsp;&nbsp;&lt;/executions&gt;<br/>
&lt;/plugin&gt;<br/>
</p>
</div>
</div>
</p>
<p>
As you see the outputDirectory can be specified to match the default of the Eclipse plug-in (xtend-gen). Of course you can also change the configuration
in Eclipse to match the Maven default (generated-sources). To do so right-click on the project and select &apos;Properties&apos; or if you prefer a global setting choose Eclipse-&gt;Preferences.
In the category &apos;Xtend/Compiler&apos; enter the directory name (see screenshot). It&apos;s interpreted as a relative path to the parent of the source folder, which includes the to-be-compiled Xtend file.
</p>
<p>
<div class="image" >
<img src="images/configure-compiler-in-eclipse.png" 
/>
<div class="caption">
Configuring the compiler in Eclipse
</div>
</div>
</p>
<a name="library"></a>
<h3>The Runtime Library</h3>
<p>
The compiler requires a small runtime library on the classpath, which mainly provides useful extensions
to existing classes and interfaces from the JDK. The class <a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/xbase/lib/InputOutput.html" title="View JavaDoc"><abbr title="org.eclipse.xtext.xbase.lib.InputOutput" >InputOutput</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext.xbase.lib/src/org/eclipse/xtext/xbase/lib/InputOutput.java" title="View Source Code" >(src)</a>
providing the method println() being one of them. 
</p>
<p>
The only surprising fact in the generated Java code may be the library class . Many 
features of Xtend are not built into the language itself but provided via the library
<em>org.eclipse.xtend.lib</em>. The library is available from a <a href="10-introduction.html#MavenSupport" title="Go to &quot;Maven Support&quot;">Maven repository</a> and via p2
update site (in case you do Eclipse Plug-In development).
</p>
<p>
The library provides means to create collections in a readable way:
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
<span class="keyword">val</span>&nbsp;myList&nbsp;=&nbsp;newArrayList(1,&nbsp;2,&nbsp;3)<br/>
<span class="keyword">val</span>&nbsp;mySet&nbsp;=&nbsp;newHashSet(4,&nbsp;5,&nbsp;6)<br/>
<span class="keyword">val</span>&nbsp;myMap&nbsp;=&nbsp;newHashMap(1&nbsp;-&gt;&nbsp;<span class="string">&apos;one&apos;</span>,&nbsp;2&nbsp;-&gt;&nbsp;<span class="string">&apos;two&apos;</span>,&nbsp;3&nbsp;-&gt;&nbsp;<span class="string">&apos;three&apos;</span>)<br/>
</p>
</div>
</div>
</p>
<p>
It also extends the collection types with a lot of very useful functions.
One example is the ubiquitous <span class="inlinecode">map</span> function:
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
<span class="keyword">val</span>&nbsp;listOfNames&nbsp;=&nbsp;listOfPersons.map[&nbsp;name&nbsp;]<br/>
</p>
</div>
</div>
</p>
<p>
Many operators to concat collections or to do arithmetics with types like <span class="inlinecode">BigDecimal</span> are also available.
</p>
<a name="GettingStarted"></a>
<h2>Getting Started</h2>
<p>
The first thing you want to see in any language is the ubiquitous "Hello World" example. 
In Xtend, that reads as
<div class="literallayout">
<div class="incode">
<p class="code">
<span class="keyword">class</span>&nbsp;HelloWorld&nbsp;{<br/>
&nbsp;&nbsp;<span class="keyword">def</span>&nbsp;<span class="keyword">static</span>&nbsp;<span class="keyword">void</span>&nbsp;main(String[]&nbsp;args)&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;println(<span class="string">"Hello&nbsp;World"</span>)<br/>
&nbsp;&nbsp;}<br/>
}<br/>
</p>
</div>
</div>
</p>
<p>
You see that Xtend looks a lot like Java. At a first glance the main difference seems to be the <span class="inlinecode"><span class="keyword">def</span></span>
keyword for declaring a method. Also as in Java it&apos;s mandatory to define a class and a main method as the entry point for an application. 
Admittedly &apos;hello world&apos; programs are not a particular strength of Xtend. The real expressiveness unleashes as soon as you do real stuff
as you will learn in a moment.
</p>
<p>
An Xtend class resides in a plain Java project. As soon as the SDK is installed, Eclipse will automatically 
translate it to Java code. You&apos;ll find it in a source folder <em>xtend-gen</em>, which is of course configurable.
The hello world example is translated to the following Java code:
<div class="literallayout">
<div class="incode">
<p class="code">
<span class="comment">//&nbsp;Generated&nbsp;Java&nbsp;Source&nbsp;Code<br/>
</span><span class="keyword">import</span>&nbsp;org.eclipse.xtext.xbase.lib.InputOutput;<br/>
<br/>
<span class="keyword">public</span>&nbsp;<span class="keyword">class</span>&nbsp;HelloWorld&nbsp;{<br/>
&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">static</span>&nbsp;<span class="keyword">void</span>&nbsp;main(<span class="keyword">final</span>&nbsp;String[]&nbsp;args)&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;InputOutput.&lt;String&gt;println(<span class="string">"Hello&nbsp;World"</span>);<br/>
&nbsp;&nbsp;}<br/>
}<br/>
</p>
</div>
</div>
</p>
<p>
You can put an Xtend class in source folders of any Java project within Eclipse (or any Maven project). Eclipse will complain
about the missing library if it&apos;s not on the classpath and provide a quick fix to add it.
</p>
<p>
The next thing you might want to do is to materialize one of the example projects.
To do so right click anywhere into the <em>Navigator</em> view in Eclipse and select <em>New -&gt; Example...</em>.
</p>
<p>
In the upcoming dialog you&apos;ll find two examples for Xtend:
</p>
<p>
<ul>
	<li>
		<em>Xtend Introductory Examples</em> contains a couple of example code snippets ilustrating certain
		  aspects and strength of Xtend. 
		  It for instance shows how to build a builder API or an API which allows you to write the following:
		  <div class="literallayout">
		<div class="incode">
		<p class="code">
		assertEquals(42.km/h,&nbsp;(40_000.m&nbsp;+&nbsp;2.km)&nbsp;/&nbsp;60.min)<br/>
		</p>
		</div>
		</div>
		
		  Also the <a href="10-introduction.html#moviesExample" title="Go to &quot;The Movies Example (src/examples6/Movies.xtend)&quot;">the movies example</a> explained in detail in <a href="10-introduction.html#moviesExample" title="Go to &quot;The Movies Example (src/examples6/Movies.xtend)&quot;">the next section</a>
		  is included here.
	</li>
	<li>
		<em>Xtend Solutions For Euler</em> contains solutions to a lot of the problems you&apos;ll find at <a href="http://projecteuler.net/">Project Euler&apos;s website</a>.
		   These examples are leveraging the whole expressive power of Xtend for instance Problem 1 can be solved
		   with the expression
		   <div class="literallayout">
		<div class="incode">
		<p class="code">
		(1..999).filter[&nbsp;i&nbsp;|&nbsp;i&nbsp;%&nbsp;3&nbsp;==&nbsp;0&nbsp;||&nbsp;i&nbsp;%&nbsp;5&nbsp;==&nbsp;0].reduce[i1,&nbsp;i2&nbsp;|&nbsp;i1&nbsp;+&nbsp;i2]<br/>
		</p>
		</div>
		</div>
		
		   which you might want to compare with <a href="http://v1.pradeepgowda.com/euler/euler001.html">solutions in other languages</a>.
	</li>
</ul>
</p>
<p>
<div class="image" >
<img src="images/materialize-example.png" 
/>
<div class="caption">
Installing The Example Project
</div>
</div>
</p>
<a name="moviesExample"></a>
<h3>The Movies Example (src/examples6/Movies.xtend)</h3>
<p>
The movies example is included in the example project <em>Xtend Introductory Examples</em> and is about reading
a file with data about movies in and doing some analysis on it.
</p>
<a name="moviesExample_2"></a>
<h4>The Data</h4>
<p>
The movie database is a plain text file (data.csv) with data sets describing movies.
Here&apos;s an example data set:
<div class="literallayout">
<div class="incode">
<p class="code">
Naked&nbsp;Lunch&nbsp;&nbsp;1991&nbsp;&nbsp;6.9&nbsp;&nbsp;16578&nbsp;&nbsp;Biography&nbsp;&nbsp;Comedy&nbsp;&nbsp;Drama&nbsp;&nbsp;Fantasy<br/>
</p>
</div>
</div>
</p>
<p>
The values are separated by two spaces. The columns are :
<ol>
	<li>
		title
	</li>
	<li>
		year
	</li>
	<li>
		rating
	</li>
	<li>
		numberOfVotes
	</li>
	<li>
		categories
	</li>
</ol>

 
Because we want to work with this data in an object oriented and statically typed manner, we 
might want to start by declaring a datatype <span class="inlinecode">Movie</span>:
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
@Data&nbsp;<span class="keyword">class</span>&nbsp;Movie&nbsp;{<br/>
&nbsp;&nbsp;String&nbsp;title<br/>
&nbsp;&nbsp;<span class="keyword">int</span>&nbsp;year<br/>
&nbsp;&nbsp;<span class="keyword">double</span>&nbsp;rating<br/>
&nbsp;&nbsp;<span class="keyword">long</span>&nbsp;numberOfVotes<br/>
&nbsp;&nbsp;Set&lt;String&gt;&nbsp;categories&nbsp;<br/>
}<br/>
</p>
</div>
</div>
</p>
<p>
It&apos;s a plain class with a typed field for each column in the data sets. The <a href="40-anntotations.html#dataAnnotation" title="Go to &quot;@Data&quot;">@Data</a>
annotation will turn this class into a value object, that is it will get 
<ul>
	<li>
		a getter-method for each field,
	</li>
	<li>
		a <span class="inlinecode">hashCode()</span>/<span class="inlinecode">equals()</span> implementation,
	</li>
	<li>
		implementation of <span class="inlinecode">Object.toString(),</span>
	</li>
	<li>
		a constructor accepting values for all fields in the declared order.
	</li>
</ul>
</p>
<a name="moviesExample_3"></a>
<h4>Parsing The Data</h4>
<p>
Let&apos;s now add another class to the same file (any number of <a href="20-classes-and-functions.html#Xtend_Classes_Members" title="Go to &quot;Classes and Members&quot;">classes</a> per file is allowed) and initialize a field
called movies with a list of movies. For the initialization we read in the text file and turn the data sets into <span class="inlinecode">Movie</span>s:
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
<span class="keyword">import</span>&nbsp;java.io.FileReader<br/>
<span class="keyword">import</span>&nbsp;java.util.Set<br/>
<span class="keyword">import</span>&nbsp;<span class="keyword">static</span>&nbsp;<span class="keyword">extension</span>&nbsp;com.google.common.io.CharStreams.*<br/>
<br/>
<span class="keyword">class</span>&nbsp;Movies&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;movies&nbsp;=&nbsp;<span class="keyword">new</span>&nbsp;FileReader(<span class="string">&apos;data.csv&apos;</span>).readLines.map[&nbsp;line&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;segments&nbsp;=&nbsp;line.split(<span class="string">&apos;&nbsp;&nbsp;&apos;</span>).iterator<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="keyword">new</span>&nbsp;Movie(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;segments.next,&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer::parseInt(segments.next),&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Double::parseDouble(segments.next),&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Long::parseLong(segments.next),&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;segments.toSet<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;]<br/>
}<br/>
</p>
</div>
</div>
</p>
<p>
A <a href="20-classes-and-functions.html#fields" title="Go to &quot;Fields&quot;">field&apos;s type</a> can be inferred from the expression on the right hand-side. 
That&apos;s called local type inference and is supported everyhwere in Xtend.
We want the field to be final, so we declare it as a value using the keyword <span class="inlinecode"><span class="keyword">val</span></span>.
</p>
<p>
The initialization on the right hand side first creates a fresh instance of <span class="inlinecode">java.io.FileReader</span>.
Then the method <span class="inlinecode">readLines()</span> is invoked on that instance. But if you have a look at <span class="inlinecode">FileReader</span> you won&apos;t find
such a method. It&apos;s a static method coming from Google Guava&apos;s <span class="inlinecode">CharStream</span> and its static methods
are imported as <a href="20-classes-and-functions.html#extensionImports" title="Go to &quot;Extension Imports&quot;">extension methods</a>, which allows us to use this readable syntax.
</p>
<p>
<span class="inlinecode">CharStream.readLines(Reader)</span> returns a <span class="inlinecode">List&lt;String&gt;</span> on which we call another extension method called <span class="inlinecode">map</span>.
That one is defined in the <a href="10-introduction.html#library" title="Go to &quot;The Runtime Library&quot;">runtime library</a> (<span class="inlinecode">ListExtensions.map(...)</span> and is so useful that it is always imported and
therefore automatically available on all lists. The <span class="inlinecode">map</span> extension expects a function as a parameter.
Map basically invokes that function for each value in the list and returns a list containing the results of the function incovations.
</p>
<p>
Function objects are created using <a href="30-expressions.html#lambdas" title="Go to &quot;Lambda Expressions&quot;">lambda expression</a> (the code in squared brackets).
Within the lambda we process a single line from the text file and turn it into a movie by splitting the string using the
separator and calling iterator on the result. As you might know <span class="inlinecode">java.lang.String.split(String)</span>
returns a string array (<span class="inlinecode">String[]</span>). Xtend <a href="15-types.html#conversionRules" title="Go to &quot;Conversion Rules&quot;">auto-convertes arrays to lists</a> when needed, which is the case when we 
call <span class="inlinecode">Iterable.iterator()</span> on it.
</p>
<p>
Now we use the iterator to create an instance of <span class="inlinecode">Movie</span>.
The data type conversion (e.g. <span class="inlinecode">String</span> to <span class="inlinecode"><span class="keyword">int</span></span>) is done by calling <a href="30-expressions.html#staticAccess" title="Go to &quot;Static Access&quot;">static methods</a> from the wrapper types. 
The rest of the iterable is turned into a set using the extension methods <span class="inlinecode">Iterators.toSet(Iterator&lt;T&gt;)</span>
and contains all the categories the movie is associated with.
</p>
<a name="moviesExample_4"></a>
<h4>AnalysingThe Data</h4>
<p>
Now that we&apos;ve the text file turned into a <span class="inlinecode">List&lt;Movie&gt;</span>, we are ready to do some analysis on it.
We use <em>Junit4</em> to make the individual analysis executable. 
The simplest example is counting the number of action movies:
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
@Test&nbsp;<span class="keyword">def</span>&nbsp;numberOfActionMovies()&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assertEquals(828,&nbsp;movies.filter[categories.contains(<span class="string">&apos;Action&apos;</span>)].size)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
</p>
</div>
</div>
</p>
<p>
It&apos;s using the extension method <span class="inlinecode">IterableExtensions.filter</span> to filter the movies. The lambda expression
checks whether the current movie&apos;s categories contains the entry <span class="inlinecode"><span class="string">&apos;Action&apos;</span></span>. Note that unlike
the lambda we used to turn the lines in the file into movies, we haven&apos;t declared a parameter name this time. 
We could have written 
<div class="literallayout">
<div class="incode">
<p class="code">
movies.filter[&nbsp;movie&nbsp;|&nbsp;movie.categories.contains(<span class="string">&apos;Action&apos;</span>)].size<br/>
</p>
</div>
</div>

but since we left out the name and the vertical bar the variable is automatically named <span class="inlinecode">it</span> which
(like <span class="inlinecode">this</span>) is an <a href="30-expressions.html#implicitVariables" title="Go to &quot;Implicit Variables this and it&quot;">implicit variable</a>. That&apos;s why we can write either 
<div class="literallayout">
<div class="incode">
<p class="code">
movies.filter[<span class="keyword">it</span>.categories.contains(<span class="string">&apos;Action&apos;</span>)].size<br/>
</p>
</div>
</div>

or 
<div class="literallayout">
<div class="incode">
<p class="code">
movies.filter[categories.contains(<span class="string">&apos;Action&apos;</span>)].size<br/>
</p>
</div>
</div>
.
</p>
<p>
Lastly we call <span class="inlinecode">size()</span> on the resulting iterable, which again is an extension method, because <span class="inlinecode">java.lang.Iterable</span>
doesn&apos;t define such a method. It&apos;s defined in <a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/xbase/lib/IterableExtensions.html" title="View JavaDoc"><abbr title="org.eclipse.xtext.xbase.lib.IterableExtensions" >IterableExtensions</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext.xbase.lib/src/org/eclipse/xtext/xbase/lib/IterableExtensions.java" title="View Source Code" >(src)</a>.
</p>
<p>
The second analysis is about finding the year the best movie from the 80ies was released.
Here&apos;s the code:
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
@Test&nbsp;<span class="keyword">def</span>&nbsp;<span class="keyword">void</span>&nbsp;yearOfBestMovieFrom80ies()&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assertEquals(1989,&nbsp;movies.filter[(1980..1989).contains(year)].sortBy[rating].last.year)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
</p>
</div>
</div>
</p>
<p>
Here we <span class="inlinecode">filter</span> all movies where the year is not included in the range from 1980 to 1989 (the 80ies).
The <span class="inlinecode">..</span> operator again is an extension defined in <a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/xbase/lib/IntegerExtensions.html" title="View JavaDoc"><abbr title="org.eclipse.xtext.xbase.lib.IntegerExtensions" >IntegerExtensions</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext.xbase.lib/src/org/eclipse/xtext/xbase/lib/IntegerExtensions.java" title="View Source Code" >(src)</a> and returns an instanceof <a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/xbase/lib/IntegerRange.html" title="View JavaDoc"><abbr title="org.eclipse.xtext.xbase.lib.IntegerRange" >IntegerRange</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext.xbase.lib/src/org/eclipse/xtext/xbase/lib/IntegerRange.java" title="View Source Code" >(src)</a>.
Operator overloading is explained in <a href="30-expressions.html#operators" title="Go to &quot;Infix Operators and Operator Overloading&quot;">section</a>.
</p>
<p>
The resulting iterable is sorted (<a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/xbase/lib/IterableExtensions.html" title="View JavaDoc"><abbr title="org.eclipse.xtext.xbase.lib.IterableExtensions" >IterableExtensions</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext.xbase.lib/src/org/eclipse/xtext/xbase/lib/IterableExtensions.java" title="View Source Code" >(src)</a><span class="inlinecode">.sortBy</span>) by the <span class="inlinecode">rating</span> of the movies. 
Since it&apos;s sorted in ascending order, we take the last movie from the list and return its <span class="inlinecode">year</span>. 
</p>
<p>
We could have sorted descending and take the head of the list as well:
<div class="literallayout">
<div class="incode">
<p class="code">
movies.filter[(1980..1989).contains(year)].sortBy[-rating].head.year<br/>
</p>
</div>
</div>
</p>
<p>
Btw. the calls to <span class="inlinecode">movie.year</span> as well as <span class="inlinecode">movie.categories</span> in the previous example in fact access the corresponding 
<a href="30-expressions.html#propertyAccess" title="Go to &quot;Property Access&quot;">getter methods</a>.
</p>
<p>
The last analysis you&apos;ll find in the example is a bit trickier. It also uses a couple of additional extension methods such 
as <a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/xbase/lib/IterableExtensions.html" title="View JavaDoc"><abbr title="org.eclipse.xtext.xbase.lib.IterableExtensions" >IterableExtensions</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext.xbase.lib/src/org/eclipse/xtext/xbase/lib/IterableExtensions.java" title="View Source Code" >(src)</a><span class="inlinecode">.&lt;T&gt;take(Iterable&lt;T&gt;,&nbsp;int)</span> and <a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/xbase/lib/IterableExtensions.html" title="View JavaDoc"><abbr title="org.eclipse.xtext.xbase.lib.IterableExtensions" >IterableExtensions</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext.xbase.lib/src/org/eclipse/xtext/xbase/lib/IterableExtensions.java" title="View Source Code" >(src)</a><span class="inlinecode">.reduce(...)</span>.
I&apos;ll leave it up to you to understand how it works, here&apos;s the full code:
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
<span class="keyword">package</span>&nbsp;example6<br/>
<br/>
<span class="keyword">import</span>&nbsp;org.junit.Test<br/>
<span class="keyword">import</span>&nbsp;java.io.FileReader<br/>
<span class="keyword">import</span>&nbsp;java.util.Set<br/>
<span class="keyword">import</span>&nbsp;<span class="keyword">static</span>&nbsp;org.junit.Assert.*<br/>
<span class="keyword">import</span>&nbsp;<span class="keyword">static</span>&nbsp;<span class="keyword">extension</span>&nbsp;com.google.common.io.CharStreams.*<br/>
<br/>
<span class="keyword">class</span>&nbsp;Movies&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/**<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;the&nbsp;total&nbsp;number&nbsp;of&nbsp;action&nbsp;movies<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@Test&nbsp;<span class="keyword">def</span>&nbsp;<span class="keyword">void</span>&nbsp;numberOfActionMovies()&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assertEquals(828,&nbsp;movies.filte[categories.contains(<span class="string">&apos;Action&apos;</span>)].size)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/**<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;the&nbsp;year&nbsp;the&nbsp;best&nbsp;rated&nbsp;movie&nbsp;of&nbsp;80ies&nbsp;(1980-1989)&nbsp;was&nbsp;released.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@Test&nbsp;<span class="keyword">def</span>&nbsp;<span class="keyword">void</span>&nbsp;yearOfBestMovieFrom80ies()&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assertEquals(1989,&nbsp;movies.filter[(1980..1989).contains(year)].sortBy[rating].last.year)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/**<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;the&nbsp;sum&nbsp;of&nbsp;the&nbsp;number&nbsp;of&nbsp;votes&nbsp;of&nbsp;the&nbsp;two&nbsp;top&nbsp;rated&nbsp;movies.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@Test&nbsp;<span class="keyword">def</span>&nbsp;<span class="keyword">void</span>&nbsp;sumOfVotesOfTop2()&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;<span class="keyword">long</span>&nbsp;movies&nbsp;=&nbsp;movies.sortBy[-rating].take(2).map[numberOfVotes].reduce[a,&nbsp;b|&nbsp;a&nbsp;+&nbsp;b]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assertEquals(47_229,&nbsp;movies)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;movies&nbsp;=&nbsp;<span class="keyword">new</span>&nbsp;FileReader(<span class="string">&apos;data.csv&apos;</span>).readLines.map[&nbsp;line&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;segments&nbsp;=&nbsp;line.split(<span class="string">&apos;&nbsp;&nbsp;&apos;</span>).iterator<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="keyword">new</span>&nbsp;Movie(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;segments.next,&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer::parseInt(segments.next),&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Double::parseDouble(segments.next),&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Long::parseLong(segments.next),&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;segments.toSet<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;]<br/>
}<br/>
<br/>
@Data&nbsp;<span class="keyword">class</span>&nbsp;Movie&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;title<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span>&nbsp;year<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">double</span>&nbsp;rating<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">long</span>&nbsp;numberOfVotes<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Set&lt;String&gt;&nbsp;categories&nbsp;<br/>
}
</p>
</div>
</div>
</p>
</body>
</html>
