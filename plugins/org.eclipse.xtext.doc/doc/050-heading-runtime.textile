
h1. Runtime Concepts

TMF Xtext itself and every language infrastructure developed with TMF Xtext is configured and wired-up using dependency injection (DI).

We use Google Guice as the underlying framework, and haven't built much on top of it as it pretty much does what we need.
So instead of describing how google guice works, we refer to the website, where additional information can be found: "http://code.google.com/p/google-guice/":http://code.google.com/p/google-guice/. 

Using DI allows everyone to set up and change all components. This does not mean that everything which gets configured using DI (we use it a lot) is automatically public API. But we don't forbid use of non-public API, as we think you should decide, if you want to rely on stable API only or use things which might be changed (further enhanced ;-)) in future. See "Xtext API Documentation":#XtextAPIDcoumentation.

h2. Runtime setup (ISetup)

For each language there is an implementation of @ISetup@ generated. It implements a method called @doSetup()@, which can be called to do the initialization of the language infrastructure.

This class is intended to be used for runtime and unit testing, only.

The setup method returns an Injector, which can further be used to obtain a parser, etc.

The setup method also registers the ResourceFactory and generated EPackage with the respective global registries provided by EMF.

So basically you can just run the setup and start using EMF API to load and store models of your language.

h2. Setup within Eclipse / Equinox

Within Eclipse we have a generated Activator, which creates a guice injector using the modules.
In addition an IExecutableExtensionFactory is generated for each language, which is used to create ExecutableExtensions.
This means that everything which is created via extension points is managed by guice as well, i.e. you can declare dependencies and get them injected upon creation. 

The only thing you have to do in order to use this factory is to prefix the class with the factory ([MyLanguageName]ExecutableExtensionFactory) name followed by a colon.

bc.. 
<extension
  point="org.eclipse.ui.editors">
  <editor
    class="<MyLanguageName>ExecutableExtensionFactory:
      org.eclipse.xtext.ui.core.editor.XtextEditor"
    contributorClass=
      "org.eclipse.ui.editors.text.TextEditorActionContributor"
    default="true"
    extensions="ecoredsl"
    id="org.eclipse.xtext.example.EcoreDsl"
    name="EcoreDsl Editor">
  </editor>
</extension>
  
  
