<html>
<head>
<title>Content Assist</title>
<link href="book.css" rel="stylesheet" type="text/css"/>
<meta content="DocBook XSL Stylesheets V1.75.1" name="generator"/>
<link rel="home" href="index.html" title="Xtext User Guide"/>
<link rel="up" href="IDEconcepts.html" title="IDE concepts"/>
<link rel="prev" href="labelProvider.html" title="Label Provider"/>
<link rel="next" href="templates.html" title="Template Proposals"/>
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<p>The Xtext generator, amongst other things, generates the following two content assist (CA) related artifacts:</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>an abstract proposal provider class named '
						<code class="code">Abstract[Language]ProposalProvider'</code> generated into the 
						<code class="code">src-gen</code> folder within the 
						<code class="code">ui</code> project
					</p>
</li>
<li class="listitem">
<p>a concrete descendent in the 
						<code class="code">src</code>-folder of the 
						<code class="code">ui</code> project 
						<code class="code">ProposalProvider</code>
					</p>
</li>
</ul>
</div>
<p>First we will investigate the generated 
				<code class="code">Abstract[Language]ProposalProvider</code> with methods that look like this:
			</p>
<div class="section" title="ProposalProvider">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="ProposalProvider"/>ProposalProvider</h3>
</div>
</div>
</div>
<div class="literallayout">
<p>
<code class="code">public void complete[TypeName]_[FeatureName](<br/>
  EObject model, <br/>
  Assignment assignment, <br/>
  ContentAssistContext context, <br/>
  ICompletionProposalAcceptor acceptor) {<br/>
  // clients may override<br/>
}<br/>
<br/>
public void complete_[RuleName](<br/>
  EObject model, <br/>
  RuleCall ruleCall, <br/>
  ContentAssistContext context, <br/>
  ICompletionProposalAcceptor acceptor) {<br/>
  // clients may override<br/>
}<br/>
<br/>
</code>
</p>
</div>
<p>The snippet above indicates that the generated ProposalProvider class contains a 
					<code class="code">complete*</code>-method for each assigned feature in the grammar and for each rule. The brackets are placeholders that should give a clue about the naming scheme, that is used to create the various entry points for clients. The generated proposal provider falls back to some default behavior for cross references. Furthermore it inherits the logic that was introduced in reused grammars. 
				</p>
<p>Clients who want to customize the behavior may override the methods from the 
					<code class="code">AbstractProposalProvider</code> or in turn introduce new methods with specialized parameters. The framework dispatches method calls according to the current context to the most concrete implementation, that can be found.
				</p>
<p>It is important to know, that for a given offset in a model file, many possible grammar elements exist. The framework dispatches to the method declarations for any valid element. That means, that a bunch of '&#8216;complete.*&#8217;' may be called.</p>
</div>
<div class="section" title="Sample Implementation">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="SampleImplementation"/>Sample Implementation</h3>
</div>
</div>
</div>
<p>To provide a dummy proposal for the description of a model object, you may introduce a specialization of the generated method and implement it as follows. This will give &#8216;Description for model #7&#8217; for a model with the intAttribute '7'</p>
<div class="literallayout">
<p>
<code class="code">public void completeModel_StringDescription (<br/>
  Model model, <br/>
  Assignment assignment, <br/>
  ContentAssistContext context, <br/>
  ICompletionProposalAcceptor acceptor) {<br/>
  // call implementation in superclass<br/>
  super.completeModel_StringDescription(<br/>
    model, <br/>
    assignment, <br/>
    context, <br/>
    acceptor);<br/>
<br/>
  // compute the plain proposal<br/>
  String proposal = "Description for model #" + model.getIntAttribute();<br/>
<br/>
  // convert it to a valid STRING-terminal<br/>
  proposal = getValueConverter().toString(proposal, "STRING");<br/>
<br/>
  // create the completion proposal<br/>
  // the result may be null as the createCompletionProposal(..) methods <br/>
  // check for valid prefixes<br/>
  // and terminal token conflicts<br/>
  ICompletionProposal completionProposal = <br/>
    createCompletionProposal(proposal, contentAssistContext);<br/>
<br/>
  // register the proposal, the acceptor handles null-values gracefully<br/>
  acceptor.accept(completionProposal);<br/>
}<br/>
<br/>
</code>
</p>
</div>
</div>
</body>
</html>
