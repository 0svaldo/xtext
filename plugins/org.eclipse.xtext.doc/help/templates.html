<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Template Proposals</title>
<link href="book.css" rel="stylesheet" type="text/css">
<meta content="DocBook XSL Stylesheets V1.75.1" name="generator">
<link rel="home" href="index.html" title="Xtext User Guide">
<link rel="up" href="IDEconcepts.html" title="IDE concepts">
<link rel="prev" href="quickfixes.html" title="Quick fixes">
<link rel="next" href="outline.html" title="Outline View">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<h1 xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0">Template Proposals</h1>
<p>Xtext-based editors automatically support code templates. That means that you get the corresponding preference page where users can add and change template proposals. If you want to ship a couple of default templates, you have to put a file named 
				<code class="code">templates.xml</code> inside the 
				<code class="code">templates</code> directory of the generated ui-plugin. This file contains templates in a format as described in the 
				<a class="ulink" href="http://help.eclipse.org/ganymede/topic/org.eclipse.cdt.doc.user/tasks/cdt_t_imp_code_temp.htm" target="_new">Eclipse online help</a> .
			</p>
<p>
				
</p>
<div class="mediaobject">
<img src="images/preferences_templates.png"></div>
<p>
			
</p>
<p>By default Xtext registers ContextTypes for each Rule (
				<code class="code">.[RuleName]</code>) and for each keyword (
				<code class="code">.kw_[keyword]</code>), as long as the keywords are valid identifiers. If you don&rsquo;t like these defaults you&rsquo;ll have to subclass 
				<a class="ulink" href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.tmf/org.eclipse.xtext/plugins/org.eclipse.xtext.ui.common/src/org/eclipse/xtext/ui/common/editor/templates/XtextTemplateContextTypeRegistry.java?root=Modeling_Project&view=co" target="_new">XtextTemplateContextTypeRegistry</a> and configure it via 
				<a class="link" href="">Guice</a>. 
			</p>
<p>In addition to the standard template proposal extension mechanism, Xtext ships with a predefined set of TemplateVariableResolvers to resolve special variable types inside a given template (i.e. TemplateContext). Besides the standard template variables available in 
				<code class="code">org.eclipse.jface.text.templates.GlobalTemplateVariables</code> like ${user}, ${date}, ${time}, ${cursor}, etc., these TemplateVariableResolver support the automatic resolving of CrossReferences (type 
				<code class="code">CrossReferences</code>) and Enumerations (type 
				<code class="code">Enum</code>) like it is explained in the following sections.
			</p>
<p>It is best practice to edit the templates in the preferences page, export them into the 
				<code class="code">templates.xml</code>-file and put this one into the 
				<code class="code">templates</code> folder of your ui-plugin. However, these templates will not be visible by default. To fix it, you have to manually edit the xml-file and insert an ID attribute for each template element.
			</p>
<div class="section" title="CrossReference TemplateVariableResolver">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="CrossReferenceTemplateVariableResolver"></a>CrossReference TemplateVariableResolver</h3>
</div>
</div>
</div>
<p>Xtext comes with a specific template variable resolver 
					<code class="code">org.eclipse.jface.text.templates.TemplateVariableResolver</code>) called 
					<code class="code">CrossReferenceResolver</code>, which can be used to place cross references within a template.
				</p>
<p>The syntax is as follows:</p>
<div class="literallayout">
<p>
<code class="code">${displayText:CrossReference('MyType.myRef')}<br>

</code>
</p>
</div>
<p>For example the following template:</p>
<div class="literallayout">
<p>
<code class="code">&lt;template&nbsp;name="transition"&nbsp;description="event&nbsp;transition"&nbsp;id="transition"<br>
&nbsp;&nbsp;&nbsp;&nbsp;context="org.eclipse.xtext.example.FowlerDsl.Transition"&nbsp;enabled="true"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;${event:CrossReference('Transition.event')}&nbsp;=&gt;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;	${state:CrossReference('Transition.state')<br>
&lt;/template&gt;<br>

<br>

</code>
</p>
</div>
<p>yields the text 
					<code class="code">event =&gt; state</code> and allows selecting any events and states using a drop down.
				</p>
<p>
					
</p>
<div class="mediaobject">
<img src="images/templates_crossref.png"></div>
<p>
				
</p>
</div>
<div class="section" title="Enumeration TemplateVariableResolver">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="EnumerationTemplateVariableResolver"></a>Enumeration TemplateVariableResolver</h3>
</div>
</div>
</div>
<p>The 
					<a class="ulink" href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.tmf/org.eclipse.xtext/plugins/org.eclipse.xtext.ui.common/src/org/eclipse/xtext/ui/common/editor/templates/EnumTemplateVariableResolver.java?root=Modeling_Project&view=co" target="_new">EnumTemplateVariableResolver</a> resolves a template variable to 
					<code class="code">EEnumLiteral</code> literals
					which are assignment-compatible to the enumeration type declared as the first parameter of the the 
					<code class="code">Enum</code> 
					<code class="code">TemplateVariable</code>. 
				</p>The syntax is as follows:   
				<div class="literallayout">
<p>
<code class="code">${displayText:Enum('Visibility')<br>

</code>
</p>
</div>
<p>For example the following template (taken from the domainmodel example):</p>
<div class="literallayout">
<p>
<code class="code">&lt;template&nbsp;name="Operation"&nbsp;description="template&nbsp;for&nbsp;an&nbsp;Operation"<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id="org.eclipse.xtext.example.Domainmodel.Operation"<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context="org.eclipse.xtext.example.Domainmodel.Operation"&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	enabled="true"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;${visibility:Enum('Visibility')}&nbsp;op&nbsp;${name}(${cursor}):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;${type:CrossReference('Operation.type')}<br>
&lt;/template&gt;<br>

<br>

</code>
</p>
</div>
<p>yields the text 
					<code class="code">public op name(): type</code> where the display text &lsquo;public&rsquo; is replaced with a drop down filled with the literal values as defined in the Visibility 
					<code class="code">EENumeration</code>. Also, &lsquo;name&rsquo; and &lsquo;type&rsquo; are placeholders.
				</p>
<p>
					
</p>
<div class="mediaobject">
<img src="images/templates_enum.png"></div>
<p>
				
</p>
</div>
</body>
</html>
