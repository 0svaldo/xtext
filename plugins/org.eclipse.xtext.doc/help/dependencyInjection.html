<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Dependency Injection in Xtext with Google Guice</title>
<link href="book.css" rel="stylesheet" type="text/css">
<meta content="DocBook XSL Stylesheets V1.75.1" name="generator">
<link rel="home" href="index.html" title="Xtext User Guide">
<link rel="up" href="configuration.html" title="Configuration">
<link rel="prev" href="configuration.html" title="Configuration">
<link rel="next" href="RuntimeConcepts.html" title="Runtime Concepts">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<h1 xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0">Dependency Injection in Xtext with Google Guice</h1>
<p>Xtext uses Google Guice in order to wire up and configure language infrstructures. This allows for very flexible customization of language infrastructure and at the same time
				makes the different pieces far more testable. </p>
<div class="section" title="Modules">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="Modules"></a>Modules</h3>
</div>
</div>
</div>
<p>The Guice injector configuration is done through the use of modules (also a Guice concept).
					The generator provides two modules when first called, one for runtime ([MyLanguage]RuntimeModule) and one for UI ([MyLanguage]UIModule).
					These modules are initially empty and intended to be manually edited when needed. These are also the modules used directly by the setup methods. 
					By default these modules extend a fully generated module.</p>
<div class="section" title="Generated Modules">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="GeneratedModules"></a>Generated Modules</h4>
</div>
</div>
</div>
<p>The fully generated modules (never touch them!) are called Abstract[MyLanguage]RuntimeModule and Abstract[MyLanguage]UiModule respectively. 
						They contain all components which have been generated specifically for the language at hand.
						Examples are: the generated parsers, serializer or for UI a proposal provider for content assist is generated.
						What goes into these modules depends on how your generator is configured.</p>
</div>
<div class="section" title="Default Modules">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="DefaultModules"></a>Default Modules</h4>
</div>
</div>
</div>
<p>Finally the fully generated modules extend the 
						<code class="code">DefaultRuntimeModule</code>, which contains all the default configuration. The default configuration consists of all components for which we have generic default implementations (interpreting as opposed to generated). 
						Examples are all the components used in linking, the outline view, hyperlinking and navigation. 
					</p>
</div>
<div class="section" title="Changing Configuration">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="ChangingConfiguration"></a>Changing Configuration</h4>
</div>
</div>
</div>
<p>We use the primary modules ([MyLanguage]RuntimeModule and [MyLanguage]UiModule) in order to change the configuration. 
						The class is initially empty and has been generated only to allow for arbitrary customization.</p>
<p>In order to provide a simple and convenient way, in TMF Xtext every module extends AbstractXtextModule. 
						This class allows to write bindings like this:</p>
<div class="literallayout">
<p>
<code class="code">public&nbsp;Class&lt;?&nbsp;extends&nbsp;MyInterface&gt;&nbsp;bind[anyname]()&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;MyInterfaceImpl.class;<br>
&nbsp;}<br>

</code>
</p>
</div>
<p>Such a method will be interpreted as a binding from 
						<code class="code">MyInterface</code> to 
						<code class="code">MyInterfaceImpl</code>. Note that you simply have to override a method from a super class (e.g. from the generated or default module) in order to change the respective binding.
						Although this is a convenient and simple way, you have of course also the full power of Guice, i.e. you can override the Guice method 
						<code class="code">void bind(Binding)</code> and do what every you want.
					</p>
</div>
</div>
</body>
</html>
