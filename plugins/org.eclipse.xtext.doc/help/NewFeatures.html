<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>New Features</title>
<link href="book.css" rel="stylesheet" type="text/css">
<meta content="DocBook XSL Stylesheets V1.75.1" name="generator">
<link rel="home" href="index.html" title="Xtext User Guide">
<link rel="up" href="from_oaw_to_tmf.html" title="From oAW to TMF">
<link rel="prev" href="differences.html" title="Differences">
<link rel="next" href="MigrationSupport.html" title="Migration Support">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<h1 xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0">New Features</h1>
<p>This section provides an overview of new possibilities with TMF Xtext compared to oAW Xtext. Please note that this list is neither complete nor does it explain every aspect in detail to keep this document tight.</p>
<div class="section" title="Dependency Injection with Google Guice">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="DependencyInjectionwithGoogleGuice"></a>Dependency Injection with Google Guice</h3>
</div>
</div>
</div>
<p>Beyond the mentioned architectural overhaul that carve out separate concerns in a meaningful way these different classes of TMF Xtext are wired using 
					<a class="ulink" href="http://code.google.com/p/google-guice" target="_new">Google Guice</a>  and can easily be replaced by or combined with your own implementation. We could have foreseen some common needs for adaption but with this mechanism you can virtually change every aspect of Xtext without duplicating an unmanageable amount of code.
				</p>
</div>
<div class="section" title="Improvements on Grammar Level">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="ImprovementsonGrammarLevel"></a>Improvements on Grammar Level</h3>
</div>
</div>
</div>
<p>The Xtext grammar language introduces some new features, too. Read the chapter 
					<a class="link" href="grammarLanguage.html" title="The Grammar Language">grammar language</a> to understand the details about all the improvements that have been implemented.
				</p>
<p>
					
<a class="link" href="grammarMixins.html" title="Grammar Mixins">Grammar mixins</a> allow you to extend existing languages and change their concrete and abstract syntax. However the abstract syntax (i.e. the Ecore model) can only be extended. This allows you to reuse existing validations, code generators, interpreters or other code which has been written against those types.
				</p>
<p>In oAW Xtext common terminals like ID, INT, STRING, ML_COMMENT, SL_COMMENT and WS (whitespace) were hard coded into the grammar language and couldn&rsquo;t be removed and hardly overridden. In TMF Xtext these terminals are imported through the newly introduced grammar mixin mechanism from the shipped grammar 
					<code class="code">org.eclipse.xtext.common.Terminals</code> per default. This means that they are still there but reside in a library now. You don&rsquo;t have to use them and you can come up with your own set of reusable rules. 
				</p>
<p>
					
<a class="link" href="grammarImport.html" title="Importing existing Ecore models">Reusing existing Ecore models</a> in oAW Xtext didn&rsquo;t work well and we communicated this by flagging this feature as &sbquo;experimental&rsquo;. In TMF Xtext importing existing Ecore models is fully supported. Moreover, it is possible to import a couple of different EPackages and generate some at the same time, so that the generated Ecore models extend or refer to the existing Ecore models.
				</p>
<p>The grammar language gained one new concept that is of great value when writing left-factored grammars (e.g. expressions). With actions one can do minor AST rewritings within a rule to overcome degenerated ASTs. You will find an 
					<a class="link" href="syntax.html#grammarActions" title="Assigned Actions">in-depth explanation of actions</a> in the dedicated chapter in the reference documentation.
				</p>
</div>
<div class="section" title="Fine-grained control for validation">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="differences_validation"></a>Fine-grained control for validation</h3>
</div>
</div>
</div>
<p>In order to make more expensive validations possible without slowing down the editor, TMF Xtext supports three different validation hooks.  </p>
<div class="orderedlist">
<ol class="orderedlist" type="1">
<li class="listitem">
<p>FAST constraints are triggered by the reconciler (i.e. 500 ms after the last keystroke) and on save.</p>
</li>
<li class="listitem">
<p>NORMAL constraints are executed on save only.</p>
</li>
<li class="listitem">
<p>EXPENSIVE constraints are executed through an action which is available through the context menu.</p>
</li>
</ol>
</div>
<p>Please note that when using Xtext models for code generation the checks of all three categories will be performed. </p>
<p>Beside this it is now possible to add information about the feature which is validated.</p>
<div class="literallayout">
<p>
<code class="code">&nbsp;&nbsp;context&nbsp;Entity#name&nbsp;ERROR&nbsp;"Name&nbsp;should&nbsp;start&nbsp;with&nbsp;a&nbsp;capital&nbsp;"+this.name+"."&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;this.name.toFirstUpper()&nbsp;==&nbsp;this.name;<br>

</code>
</p>
</div>
<p>If you add the name of a feature prepended by a hash (&sbquo;#&rsquo;) in Check, the editor will only mark the value of the feature (name), not the whole object (Entity). Both concepts, control over validation time as well as pointing to a specific feature, complement one another in Check and Java based validation.</p>
</div>
</body>
</html>
